{% comment %}
  Availability Badge Snippet
  Usage: {% render 'availability-badge', product: product %}
{% endcomment %}

{%- if product -%}
  {%- assign total_quantity = 0 -%}
  {%- for variant in product.variants -%}
    {%- assign total_quantity = total_quantity | plus: variant.inventory_quantity -%}
  {%- endfor -%}
  
  <div class="availability-badge" data-product-id="{{ product.id }}">
    {%- if total_quantity == 0 -%}
      <span class="badge badge--out-of-stock" aria-label="Out of stock">
        <span class="badge__icon">‚è≥</span>
        <span class="badge__text">Out of Stock</span>
      </span>
    {%- elsif total_quantity < 10 -%}
      <span class="badge badge--low-stock" aria-label="Low stock - only {{ total_quantity }} left">
        <span class="badge__icon">üî•</span>
        <span class="badge__text">Low Stock ({{ total_quantity }} left)</span>
      </span>
    {%- else -%}
      <span class="badge badge--in-stock" aria-label="In stock">
        <span class="badge__icon">‚úÖ</span>
        <span class="badge__text">In Stock</span>
      </span>
    {%- endif -%}
  </div>

  <style>
    .availability-badge {
      display: inline-block;
      margin: 0.5rem 0;
    }
    
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.375rem 0.75rem;
      border-radius: 0.375rem;
      font-size: 0.875rem;
      font-weight: 500;
      line-height: 1;
    }
    
    .badge--out-of-stock {
      background-color: #fef2f2;
      color: #dc2626;
      border: 1px solid #fecaca;
    }
    
    .badge--low-stock {
      background-color: #fffbeb;
      color: #d97706;
      border: 1px solid #fed7aa;
    }
    
    .badge--in-stock {
      background-color: #f0fdf4;
      color: #16a34a;
      border: 1px solid #bbf7d0;
    }
    
    .badge__icon {
      font-size: 1rem;
    }
    
    .badge__text {
      white-space: nowrap;
    }
  </style>
{%- endif -%}
