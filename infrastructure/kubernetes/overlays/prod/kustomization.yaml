apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: portfolio-app

resources:
  - ../../base
  - ../../rbac/serviceaccounts.yaml
  - ../../rbac/roles.yaml

namePrefix: prod-

patchesStrategicMerge:
  - patch-prod.yaml
  - patch-ingress.yaml

images:
  - name: ghcr.io/sams-jackson/portfolio-api
    newTag: v1.4.1
  - name: ghcr.io/sams-jackson/portfolio-worker
    newTag: v1.4.1

configMapGenerator:
  - name: portfolio-api-config-prod
    behavior: merge
    literals:
      - FEATURE_EXPORTS=true
      - RATE_LIMIT_PER_MINUTE=120
