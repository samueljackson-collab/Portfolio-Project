apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: portfolio-app

resources:
  - namespace.yaml
  - deployment-api.yaml
  - service-api.yaml
  - hpa-api.yaml
  - deployment-worker.yaml
  - service-worker.yaml
  - cronjob-reindex.yaml
  - ingress.yaml

configMapGenerator:
  - name: portfolio-api-config
    literals:
      - LOG_LEVEL=info
      - FEATURE_EXPORTS=true

secretGenerator:
  - name: portfolio-api-secrets
    literals:
      - DATABASE_NAME=portfolio
    type: Opaque

images:
  - name: ghcr.io/sams-jackson/portfolio-api
    newTag: v1.4.0
  - name: ghcr.io/sams-jackson/portfolio-worker
    newTag: v1.4.0

commonLabels:
  app.kubernetes.io/name: portfolio
  app.kubernetes.io/part-of: portfolio-platform
