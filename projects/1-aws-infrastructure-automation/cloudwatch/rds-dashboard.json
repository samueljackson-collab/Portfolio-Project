{
  "widgets": [
    {
      "type": "text",
      "x": 0,
      "y": 0,
      "width": 24,
      "height": 1,
      "properties": {
        "markdown": "# RDS PostgreSQL Monitoring Dashboard\nMonitor database performance, connections, storage, and replication"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 1,
      "width": 6,
      "height": 6,
      "properties": {
        "title": "CPU Utilization",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "CPUUtilization", "DBInstanceIdentifier", "${DB_INSTANCE_ID}", {"stat": "Average", "period": 60, "label": "CPU %"}]
        ],
        "view": "timeSeries",
        "stacked": false,
        "yAxis": {
          "left": {
            "min": 0,
            "max": 100,
            "label": "Percent"
          }
        },
        "annotations": {
          "horizontal": [
            {"label": "Warning", "value": 70, "color": "#ff7f0e"},
            {"label": "Critical", "value": 85, "color": "#d62728"}
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 6,
      "y": 1,
      "width": 6,
      "height": 6,
      "properties": {
        "title": "Database Connections",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "DatabaseConnections", "DBInstanceIdentifier", "${DB_INSTANCE_ID}", {"stat": "Average", "period": 60, "label": "Active Connections"}]
        ],
        "view": "timeSeries",
        "stacked": false,
        "annotations": {
          "horizontal": [
            {"label": "Warning", "value": 80, "color": "#ff7f0e"}
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 1,
      "width": 6,
      "height": 6,
      "properties": {
        "title": "Freeable Memory",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "FreeableMemory", "DBInstanceIdentifier", "${DB_INSTANCE_ID}", {"stat": "Average", "period": 60, "label": "Free Memory"}]
        ],
        "view": "timeSeries",
        "stacked": false,
        "yAxis": {
          "left": {
            "label": "Bytes"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 18,
      "y": 1,
      "width": 6,
      "height": 6,
      "properties": {
        "title": "Free Storage Space",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "FreeStorageSpace", "DBInstanceIdentifier", "${DB_INSTANCE_ID}", {"stat": "Average", "period": 300, "label": "Free Storage"}]
        ],
        "view": "timeSeries",
        "stacked": false,
        "yAxis": {
          "left": {
            "label": "Bytes"
          }
        },
        "annotations": {
          "horizontal": [
            {"label": "Warning (5GB)", "value": 5368709120, "color": "#ff7f0e"},
            {"label": "Critical (1GB)", "value": 1073741824, "color": "#d62728"}
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 7,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "Read/Write IOPS",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "ReadIOPS", "DBInstanceIdentifier", "${DB_INSTANCE_ID}", {"stat": "Average", "period": 60, "label": "Read IOPS"}],
          [".", "WriteIOPS", ".", ".", {"stat": "Average", "period": 60, "label": "Write IOPS"}]
        ],
        "view": "timeSeries",
        "stacked": false
      }
    },
    {
      "type": "metric",
      "x": 8,
      "y": 7,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "Read/Write Latency",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "ReadLatency", "DBInstanceIdentifier", "${DB_INSTANCE_ID}", {"stat": "Average", "period": 60, "label": "Read Latency (s)"}],
          [".", "WriteLatency", ".", ".", {"stat": "Average", "period": 60, "label": "Write Latency (s)"}]
        ],
        "view": "timeSeries",
        "stacked": false,
        "yAxis": {
          "left": {
            "label": "Seconds"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 16,
      "y": 7,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "Read/Write Throughput",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "ReadThroughput", "DBInstanceIdentifier", "${DB_INSTANCE_ID}", {"stat": "Average", "period": 60, "label": "Read (bytes/s)"}],
          [".", "WriteThroughput", ".", ".", {"stat": "Average", "period": 60, "label": "Write (bytes/s)"}]
        ],
        "view": "timeSeries",
        "stacked": false,
        "yAxis": {
          "left": {
            "label": "Bytes/Second"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 13,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "Network Throughput",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "NetworkReceiveThroughput", "DBInstanceIdentifier", "${DB_INSTANCE_ID}", {"stat": "Average", "period": 60, "label": "Receive (bytes/s)"}],
          [".", "NetworkTransmitThroughput", ".", ".", {"stat": "Average", "period": 60, "label": "Transmit (bytes/s)"}]
        ],
        "view": "timeSeries",
        "stacked": false
      }
    },
    {
      "type": "metric",
      "x": 8,
      "y": 13,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "Swap Usage",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "SwapUsage", "DBInstanceIdentifier", "${DB_INSTANCE_ID}", {"stat": "Average", "period": 60, "label": "Swap Usage"}]
        ],
        "view": "timeSeries",
        "stacked": false,
        "yAxis": {
          "left": {
            "label": "Bytes"
          }
        }
      }
    },
    {
      "type": "metric",
      "x": 16,
      "y": 13,
      "width": 8,
      "height": 6,
      "properties": {
        "title": "Disk Queue Depth",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "DiskQueueDepth", "DBInstanceIdentifier", "${DB_INSTANCE_ID}", {"stat": "Average", "period": 60, "label": "Queue Depth"}]
        ],
        "view": "timeSeries",
        "stacked": false
      }
    },
    {
      "type": "text",
      "x": 0,
      "y": 19,
      "width": 24,
      "height": 1,
      "properties": {
        "markdown": "## Multi-AZ and Replication Metrics"
      }
    },
    {
      "type": "metric",
      "x": 0,
      "y": 20,
      "width": 12,
      "height": 6,
      "properties": {
        "title": "Replication Lag (Read Replica)",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "ReplicaLag", "DBInstanceIdentifier", "${DB_REPLICA_ID}", {"stat": "Average", "period": 60, "label": "Replica Lag (s)"}]
        ],
        "view": "timeSeries",
        "stacked": false,
        "annotations": {
          "horizontal": [
            {"label": "Warning (30s)", "value": 30, "color": "#ff7f0e"},
            {"label": "Critical (60s)", "value": 60, "color": "#d62728"}
          ]
        }
      }
    },
    {
      "type": "metric",
      "x": 12,
      "y": 20,
      "width": 12,
      "height": 6,
      "properties": {
        "title": "Transaction Logs Disk Usage",
        "region": "${AWS_REGION}",
        "metrics": [
          ["AWS/RDS", "TransactionLogsDiskUsage", "DBInstanceIdentifier", "${DB_INSTANCE_ID}", {"stat": "Average", "period": 300, "label": "WAL Disk Usage"}]
        ],
        "view": "timeSeries",
        "stacked": false
      }
    }
  ]
}
