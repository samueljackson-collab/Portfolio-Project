import React, { useState } from 'react';

export default function HostList({ hosts, onCreate }) {
  const [form, setForm] = useState({ hostname: '', ip_address: '', operating_system: '', criticality: 'medium' });

  const handleChange = (e) => setForm({ ...form, [e.target.name]: e.target.value });

  async function submit(event) {
    event.preventDefault();
    await onCreate(form);
    setForm({ hostname: '', ip_address: '', operating_system: '', criticality: 'medium' });
  }

  return (
    <div style={{ background: '#1e293b', padding: '1rem', borderRadius: '8px' }}>
      <h3>Hosts</h3>
      <ul>
        {hosts.map((host) => (
          <li key={host.id}>
            <strong>{host.hostname}</strong> ({host.ip_address}) - {host.operating_system} [{host.criticality}]
          </li>
        ))}
        {hosts.length === 0 && <li style={{ color: '#94a3b8' }}>No hosts modeled yet</li>}
      </ul>

      <form onSubmit={submit}>
        <input name="hostname" placeholder="hostname" value={form.hostname} onChange={handleChange} required />
        <input name="ip_address" placeholder="10.0.0.10" value={form.ip_address} onChange={handleChange} required />
        <input name="operating_system" placeholder="OS" value={form.operating_system} onChange={handleChange} required />
        <select name="criticality" value={form.criticality} onChange={handleChange}>
          <option value="low">low</option>
          <option value="medium">medium</option>
          <option value="high">high</option>
        </select>
        <button type="submit">Add Host</button>
      </form>
    </div>
  );
}
