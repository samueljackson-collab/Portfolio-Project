{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations & Alerts","type":"dashboard"}]},"editable":true,"gnetId":null,"graphTooltip":0,"id":null,"links":[],"liveNow":false,"panels":[{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":0},"id":100,"panels":[],"title":"Row 1: Key Metrics","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":0}]}},"overrides":[]},"gridPos":{"h":3,"w":4,"x":0,"y":1},"id":101,"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"value_and_name"},"targets":[{"expr":"count(up)","legendFormat":"","refId":"A"}],"title":"Total Hosts","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":10},{"color":"red","value":20}]}},"overrides":[]},"gridPos":{"h":3,"w":4,"x":4,"y":1},"id":102,"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"value_and_name"},"targets":[{"expr":"sum(proxmox_vm_info)","refId":"A"}],"title":"Total VMs/Containers","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":95}]},"unit":"percent"},"overrides":[]},"gridPos":{"h":3,"w":4,"x":8,"y":1},"id":103,"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull","fields":"","values":false}},"textMode":"value_and_name"},"targets":[{"expr":"avg(100 - (avg by(instance) (irate(node_cpu_seconds_total{mode=\"idle\",instance=~\"$host\"}[5m])) * 100))","refId":"A"}],"title":"CPU Usage Average","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":95}]},"unit":"percent"}},"gridPos":{"h":3,"w":4,"x":12,"y":1},"id":104,"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"value_and_name"},"targets":[{"expr":"avg((1 - (node_memory_MemAvailable_bytes{instance=~\"$host\"} / node_memory_MemTotal_bytes{instance=~\"$host\"})) * 100)","refId":"A"}],"title":"Memory Usage Average","type":"stat"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":90}]},"unit":"percent"}},"gridPos":{"h":3,"w":4,"x":16,"y":1},"id":105,"options":{"colorMode":"value","graphMode":"none","justifyMode":"center","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"value_and_name"},"targets":[{"expr":"avg(100 - ((node_filesystem_avail_bytes{fstype!~\"tmpfs|devtmpfs\",instance=~\"$host\"} / node_filesystem_size_bytes{fstype!~\"tmpfs|devtmpfs\",instance=~\"$host\"}) * 100))","refId":"A"}],"title":"Disk Usage Average","type":"stat"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":4},"id":200,"panels":[],"title":"Row 2: Resource Usage","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"CPU %","axisPlacement":"auto","drawStyle":"line","lineInterpolation":"smooth","lineWidth":2,"showPoints":"never"},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":95}]},"unit":"percent"}},"gridPos":{"h":8,"w":12,"x":0,"y":5},"id":201,"options":{"legend":{"calcs":["lastNotNull","max","mean"],"displayMode":"table","placement":"right"},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"expr":"100 - (avg by(instance) (irate(node_cpu_seconds_total{mode=\"idle\",instance=~\"$host\"}[5m])) * 100)","legendFormat":"{{instance}}","refId":"A"}],"title":"CPU Usage by Host","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"Memory %","axisPlacement":"auto","drawStyle":"line","lineWidth":2,"showPoints":"never"},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":95}]},"unit":"percent"}},"gridPos":{"h":8,"w":12,"x":12,"y":5},"id":202,"options":{"legend":{"calcs":["lastNotNull","max","mean"],"displayMode":"table","placement":"right"},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"expr":"(1 - (node_memory_MemAvailable_bytes{instance=~\"$host\"} / node_memory_MemTotal_bytes{instance=~\"$host\"})) * 100","legendFormat":"{{instance}}","refId":"A"}],"title":"Memory Usage by Host","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"Bytes/s","axisPlacement":"auto","drawStyle":"line","lineWidth":2,"showPoints":"never"},"unit":"Bps"}},"gridPos":{"h":8,"w":24,"x":0,"y":13},"id":203,"options":{"legend":{"calcs":["lastNotNull","max","mean"],"displayMode":"table","placement":"right"},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"expr":"sum by(instance) (rate(node_network_receive_bytes_total{instance=~\"$host\"}[5m]))","legendFormat":"{{instance}} RX","refId":"A"},{"expr":"sum by(instance) (rate(node_network_transmit_bytes_total{instance=~\"$host\"}[5m]))","legendFormat":"{{instance}} TX","refId":"B"}],"title":"Network Traffic","type":"timeseries"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":21},"id":300,"panels":[],"title":"Row 3: Disk and Storage","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"IOPS","axisPlacement":"auto","drawStyle":"line","lineWidth":2,"showPoints":"never"},"unit":"iops"}},"gridPos":{"h":8,"w":12,"x":0,"y":22},"id":301,"options":{"legend":{"calcs":["lastNotNull","max","mean"],"displayMode":"table","placement":"right"},"tooltip":{"mode":"multi","sort":"desc"}},"targets":[{"expr":"sum by(instance) (rate(node_disk_reads_completed_total{instance=~\"$host\"}[5m]))","legendFormat":"{{instance}} reads","refId":"A"},{"expr":"sum by(instance) (rate(node_disk_writes_completed_total{instance=~\"$host\"}[5m]))","legendFormat":"{{instance}} writes","refId":"B"}],"title":"Disk I/O Operations","type":"timeseries"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"custom":{"displayMode":"gradient","min":0,"max":100},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":80},{"color":"red","value":90}]},"unit":"percent"}},"gridPos":{"h":8,"w":6,"x":12,"y":22},"id":302,"options":{"orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull","fields":"","values":false},"showUnfilled":true,"text":{}},"targets":[{"expr":"100 - ((node_filesystem_avail_bytes{fstype!~\"tmpfs|devtmpfs\",instance=~\"$host\"} / node_filesystem_size_bytes{fstype!~\"tmpfs|devtmpfs\",instance=~\"$host\"}) * 100)","legendFormat":"{{instance}} {{mountpoint}}"}],"title":"Filesystem Usage","type":"bargauge"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"thresholds"},"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"yellow","value":70},{"color":"red","value":90}]},"unit":"bytes"}},"gridPos":{"h":8,"w":6,"x":18,"y":22},"id":303,"options":{"colorMode":"value","graphMode":"none","justifyMode":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull","fields":"","values":false},"textMode":"value_and_name"},"targets":[{"expr":"truenas_pool_used_bytes","refId":"A"},{"expr":"truenas_pool_size_bytes","hide":true,"refId":"B"}],"title":"TrueNAS Storage Pool Usage","type":"stat"},{"collapsed":false,"gridPos":{"h":1,"w":24,"x":0,"y":30},"id":400,"panels":[],"title":"Row 4: System Health","type":"row"},{"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":7,"w":8,"x":0,"y":31},"id":401,"options":{"showHeader":true,"sortBy":[{"desc":true,"displayName":"Value"}]},"targets":[{"expr":"ALERTS{alertstate=\"firing\"}","format":"table","refId":"A"}],"transformations":[{"id":"organize","options":{"excludeByName":{"__name__":true},"indexByName":{},"renameByName":{"value":"Value"}}}],"type":"table"},{"datasource":{"type":"prometheus","uid":"prometheus"},"gridPos":{"h":7,"w":8,"x":8,"y":31},"id":402,"options":{"showHeader":true},"targets":[{"expr":"proxmox_backup_job_last_status","format":"table","refId":"A"}],"title":"Backup Job Status","type":"table"},{"datasource":{"type":"prometheus","uid":"prometheus"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisLabel":"Days","axisPlacement":"auto","drawStyle":"bars","lineWidth":1,"showPoints":"auto"}}},"gridPos":{"h":7,"w":8,"x":16,"y":31},"id":403,"options":{"legend":{"displayMode":"list","placement":"right"},"tooltip":{"mode":"single"}},"targets":[{"expr":"node_time_seconds{instance=~\"$host\"} - node_boot_time_seconds{instance=~\"$host\"}","legendFormat":"{{instance}}","refId":"A"}],"title":"Uptime by Host","type":"timeseries"}],"refresh":"30s","schemaVersion":36,"style":"dark","tags":["homelab","infrastructure"],"templating":{"list":[{"current":{"selected":true,"text":["All"],"value":[".*"]},"datasource":{"type":"prometheus","uid":"prometheus"},"definition":"label_values(node_exporter_build_info, instance)","hide":0,"includeAll":true,"label":"Host","multi":true,"name":"host","options":[],"query":"label_values(node_exporter_build_info, instance)","refresh":1,"regex":"","sort":1,"type":"query"},{"auto":true,"auto_count":30,"auto_min":"10s","current":{"text":"auto","value":"auto"},"hide":0,"label":"Interval","name":"interval","options":[{"selected":true,"text":"auto","value":"auto"},{"text":"10s","value":"10s"},{"text":"30s","value":"30s"},{"text":"1m","value":"1m"},{"text":"5m","value":"5m"}],"query":"1m","refresh":2,"type":"interval"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{"refresh_intervals":["10s","30s","1m","5m","15m","30m","1h"],"time_options":["1h","6h","24h","7d","30d"]},"timezone":"","title":"Homelab Infrastructure Overview","uid":"homelab-infra-overview","version":1}