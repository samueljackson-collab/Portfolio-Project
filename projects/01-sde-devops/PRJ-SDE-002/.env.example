# Environment Configuration File
# ===============================
# This file contains all configurable environment variables for the monitoring stack.
#
# SETUP INSTRUCTIONS:
#   1. Copy this file to .env: cp .env.example .env
#   2. Update values marked with "CHANGE_ME" or adjust defaults
#   3. NEVER commit .env to version control (contains secrets)
#   4. Store production secrets in a secure vault (1Password, HashiCorp Vault, AWS Secrets Manager)
#
# SECURITY NOTES:
#   - .env file should be in .gitignore (verify before committing)
#   - Use strong, unique passwords (20+ characters, mixed case, special chars)
#   - Rotate passwords regularly (quarterly recommended)
#   - Limit file permissions: chmod 600 .env
#
# Documentation: https://docs.docker.com/compose/environment-variables/
# Author: Portfolio Project
# Last Updated: 2024-11-24

# ==============================================================================
# GRAFANA CONFIGURATION
# ==============================================================================
# Grafana: Visualization and dashboarding platform
# Web UI: http://localhost:3000 (default)
# Documentation: https://grafana.com/docs/grafana/latest/setup-grafana/configure-grafana/

# Admin Credentials
# -----------------
# CRITICAL: Change these immediately after first login!
# Default: admin/admin (INSECURE, never use in production)
#
# Password Requirements:
#   - Minimum 12 characters (20+ recommended)
#   - Mix of uppercase, lowercase, numbers, special characters
#   - No dictionary words or common patterns
#   - Don't reuse passwords from other services
#
# Best Practice: Generate with password manager
#   - 1Password: Generate 20-char password with symbols
#   - pwgen: pwgen -s 20 1
#   - OpenSSL: openssl rand -base64 20
#
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=CHANGE_ME_SecurePassword123!

# Admin email for notifications and password reset
# Used by: Alert notification emails, user invitations
GF_SECURITY_ADMIN_EMAIL=admin@example.com

# Server Configuration
# --------------------

# Root URL: Public-facing URL for Grafana
# Important for: OAuth callbacks, email links, shared dashboards
# Development: http://localhost:3000
# Production: https://grafana.yourdomain.com (with TLS)
#
# Format: protocol://hostname:port/path
# Examples:
#   http://192.168.1.100:3000 (LAN access)
#   https://monitoring.example.com (production)
#   http://localhost:3000/grafana (behind reverse proxy at /grafana)
#
GF_SERVER_ROOT_URL=http://localhost:3000

# Plugins
# -------

# Plugins to install on startup
# Format: Comma-separated list of plugin IDs
# Find plugins: https://grafana.com/grafana/plugins/
#
# Popular plugins:
#   - grafana-piechart-panel: Pie chart visualization
#   - grafana-clock-panel: Clock and time display
#   - grafana-worldmap-panel: Geographic map visualization
#   - grafana-polystat-panel: Honeycomb visualization
#   - agenty-flowcharting-panel: Flowchart/network diagrams
#
# Install specific version: plugin-id;version
#   Example: grafana-piechart-panel;1.6.2
#
GF_INSTALL_PLUGINS=grafana-piechart-panel,grafana-clock-panel

# ==============================================================================
# PROMETHEUS CONFIGURATION
# ==============================================================================
# Prometheus: Time-series metrics database
# Web UI: http://localhost:9090 (default)
# Documentation: https://prometheus.io/docs/prometheus/latest/

# Data Retention
# --------------

# How long to keep metrics before deletion
# Format: <number><unit> where unit is d (days), w (weeks), y (years)
# Examples: 7d, 2w, 15d, 1y
#
# Storage calculation:
#   Disk usage ≈ retention * samples/sec * bytes/sample * compression
#   Example: 15d * 50K samples/s * 1.5 bytes * 0.5 compression ≈ 49GB
#
# Considerations:
#   - Longer retention = more historical data for analysis
#   - Longer retention = more disk space required
#   - Longer retention = slower compaction
#
# Recommendations:
#   - Development: 7d (save disk space)
#   - Production: 15d-30d (balance storage and history)
#   - Long-term: Use remote storage (Thanos, Cortex) for years of data
#
PROMETHEUS_RETENTION=15d

# Storage Path
# ------------

# Local path for time-series database
# Contains: TSDB blocks, WAL (write-ahead log), indexes
# Must be: Writable by Prometheus (UID 65534 in container)
#
# Default: ./data/prometheus (relative to docker-compose.yml)
# Absolute: /mnt/storage/prometheus (external volume)
#
# Backup strategy:
#   - Daily snapshots of this directory
#   - Or use Prometheus remote_write to backup storage
#
PROMETHEUS_DATA_PATH=./data/prometheus

# ==============================================================================
# GRAFANA DATA PATHS
# ==============================================================================
# Persistent data storage paths for Grafana

# Grafana data directory
# Contains: SQLite database, plugins, provisioning, sessions
# Critical for: Dashboard definitions, user accounts, preferences
#
# BACKUP: This directory contains all Grafana configuration
#         Include in daily backup routine
#
GRAFANA_DATA_PATH=./data/grafana

# ==============================================================================
# LOKI CONFIGURATION
# ==============================================================================
# Loki: Log aggregation system
# HTTP API: http://localhost:3100 (default)
# Documentation: https://grafana.com/docs/loki/latest/

# Storage Path
# ------------

# Local path for log storage
# Contains: Compressed log chunks, indexes, cache
# Growth: Depends on log volume and retention (typically 5-10GB/day)
#
# Retention: Configured in loki-config.yml (default: 7 days)
#   - Older logs automatically deleted by compactor
#   - Adjust retention based on compliance requirements and disk space
#
LOKI_DATA_PATH=./data/loki

# ==============================================================================
# ALERTMANAGER CONFIGURATION
# ==============================================================================
# Alertmanager: Alert routing and notification management
# Web UI: http://localhost:9093 (default)
# Documentation: https://prometheus.io/docs/alerting/latest/alertmanager/

# Storage Path
# ------------

# Path for Alertmanager persistent data
# Contains: Silences, notification history, deduplicated alerts
# Important for: Maintaining silences across restarts
#
ALERTMANAGER_DATA_PATH=./data/alertmanager

# Email Configuration (SMTP)
# ---------------------------

# SMTP server for email notifications
# Format: hostname:port
#
# Common SMTP servers:
#   Gmail: smtp.gmail.com:587 (TLS)
#   Outlook: smtp-mail.outlook.com:587 (TLS)
#   SendGrid: smtp.sendgrid.net:587 (TLS)
#   Mailgun: smtp.mailgun.org:587 (TLS)
#   Self-hosted: mail.yourdomain.com:587
#
# Ports:
#   25: Unencrypted (avoid, often blocked)
#   587: STARTTLS (recommended)
#   465: TLS/SSL (alternative)
#
ALERTMANAGER_SMTP_HOST=smtp.gmail.com:587

# From address for alert emails
# Should be: Valid email address, authorized by SMTP server
# Examples:
#   alerts@yourdomain.com
#   monitoring@yourdomain.com
#   no-reply@yourdomain.com
#
ALERTMANAGER_SMTP_FROM=alerts@example.com

# SMTP authentication username
# Usually: Your email address
# Gmail: your-email@gmail.com
# Outlook: your-email@outlook.com
# Custom domain: your-email@yourdomain.com
#
ALERTMANAGER_SMTP_USERNAME=your-email@gmail.com

# SMTP authentication password
# CRITICAL: Use app-specific password, not your account password!
#
# Gmail App Passwords:
#   1. Enable 2FA on your Google account
#   2. Go to: https://myaccount.google.com/apppasswords
#   3. Generate app password for "Mail"
#   4. Use generated password here (16 characters, no spaces)
#
# Outlook App Passwords:
#   1. Go to: https://account.microsoft.com/security
#   2. Advanced security options → App passwords
#   3. Create new app password
#
# Security: Never use your actual email password!
#           App passwords can be revoked without changing main password
#
ALERTMANAGER_SMTP_PASSWORD=CHANGE_ME_AppSpecificPassword

# Recipient Addresses
# -------------------

# Default email recipient for alerts
# Can be: Single email or comma-separated list
# Examples:
#   admin@example.com
#   team@example.com,oncall@example.com
#
ALERTMANAGER_EMAIL_TO=admin@example.com

# Critical alerts recipient (higher priority)
# Separate inbox or distribution list for critical alerts
# Examples:
#   critical@example.com (filtered inbox)
#   oncall@example.com (pager notification)
#   ops-team@example.com (team distribution list)
#
ALERTMANAGER_CRITICAL_EMAIL_TO=critical@example.com

# Monitoring team recipient (for monitoring stack alerts)
# Alerts about monitoring system itself (Prometheus down, etc.)
# Should go to: Team responsible for monitoring infrastructure
#
ALERTMANAGER_MONITORING_TEAM_EMAIL=monitoring-team@example.com

# Info alerts recipient (low priority)
# Optional: Separate address for informational alerts
# Or use same as EMAIL_TO if no separation needed
#
ALERTMANAGER_INFO_EMAIL_TO=info@example.com

# Slack Configuration (Optional)
# -------------------------------

# Slack webhook URL for notifications
# How to get:
#   1. Go to: https://api.slack.com/messaging/webhooks
#   2. Create new Slack app or use existing
#   3. Enable Incoming Webhooks
#   4. Create webhook for desired channel
#   5. Copy webhook URL (https://hooks.slack.com/services/...)
#
# Format: https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXX
#
# Security: Treat like password, never commit to git
# Rotation: Regenerate if exposed, old URLs are invalidated
#
# Uncomment to enable:
# ALERTMANAGER_SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/HERE

# PagerDuty Configuration (Optional)
# -----------------------------------

# PagerDuty integration key for critical alerts
# How to get:
#   1. Log in to PagerDuty
#   2. Configuration → Services
#   3. Select service or create new
#   4. Integrations tab → Add integration
#   5. Integration type: Events API V2
#   6. Copy Integration Key (32-character hex string)
#
# Format: 32-character hexadecimal string
# Example: a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6
#
# Uncomment to enable:
# PAGERDUTY_SERVICE_KEY=CHANGE_ME_PagerDutyIntegrationKey

# ==============================================================================
# SYSTEM CONFIGURATION
# ==============================================================================

# Hostname
# --------

# Hostname identifier for this monitoring instance
# Used in: Alert labels, external labels, log identification
# Should be: Descriptive and unique if running multiple instances
#
# Examples:
#   proxmox-monitoring-01 (primary monitoring server)
#   homelab-monitoring (homelab environment)
#   prod-monitoring-us-east-1 (production, region-specific)
#
# Fallback: If not set, uses container hostname (randomly generated)
#
HOSTNAME=monitoring-01

# Environment
# -----------

# Environment identifier
# Used in: Alert routing, dashboard filtering, metric labels
# Common values: production, staging, development, homelab
#
ENVIRONMENT=homelab

# Timezone
# --------

# Timezone for container logs and timestamps
# Format: IANA timezone database format
# Examples: America/New_York, Europe/London, Asia/Tokyo, UTC
#
# Find your timezone:
#   - List all: timedatectl list-timezones
#   - Current system TZ: timedatectl | grep "Time zone"
#
# Affects: Log timestamps, dashboard time ranges
#
TZ=America/New_York

# ==============================================================================
# ADVANCED CONFIGURATION
# ==============================================================================
# Advanced settings, usually don't need to change

# Docker Compose Project Name
# ----------------------------
# Prefix for container names and networks
# Default: Directory name
# Set explicitly for: Consistent naming across deployments
#
# COMPOSE_PROJECT_NAME=monitoring-stack

# Logging Driver
# --------------
# Docker logging driver for monitoring stack containers
# Options: json-file, syslog, journald, gelf, fluentd, awslogs
# Default: json-file (works with Promtail)
#
# DOCKER_LOGGING_DRIVER=json-file

# Resource Limits (Override defaults from docker-compose.yml)
# ------------------

# Prometheus memory limit
# Default: 2G (sufficient for ~50K samples/sec, 15-day retention)
# Increase if: OOM errors, high cardinality, many targets
# PROMETHEUS_MEMORY_LIMIT=2G

# Grafana memory limit
# Default: 1G (sufficient for typical usage)
# Increase if: Many concurrent users, complex dashboards
# GRAFANA_MEMORY_LIMIT=1G

# Loki memory limit
# Default: 1G
# Increase if: High log volume (>10GB/day), many concurrent queries
# LOKI_MEMORY_LIMIT=1G

# ==============================================================================
# USAGE NOTES
# ==============================================================================
#
# Loading this file:
#   - Docker Compose automatically loads .env from project directory
#   - Variables accessible in docker-compose.yml as ${VAR_NAME}
#   - Variables passed to containers as environment variables
#
# Overriding values:
#   - Command line: docker-compose up -d -e GF_SECURITY_ADMIN_PASSWORD=newpass
#   - Export in shell: export GF_SECURITY_ADMIN_PASSWORD=newpass
#   - Priority: CLI > Shell exports > .env file > docker-compose.yml defaults
#
# Validation:
#   - Check loaded values: docker-compose config
#   - This resolves all variables and shows final configuration
#   - Useful for: Debugging, verifying secrets are loaded correctly
#
# Multiple environments:
#   - .env.development, .env.production, .env.staging
#   - Specify file: docker-compose --env-file .env.production up -d
#   - Useful for: Different credentials per environment
#
# Security best practices:
#   1. Never commit .env files to version control
#   2. Use .env.example with placeholders only
#   3. Store production secrets in secure vault
#   4. Rotate secrets regularly
#   5. Limit .env file permissions: chmod 600 .env
#   6. Use different credentials per environment
#   7. Enable 2FA on all accounts
#   8. Monitor for leaked secrets (GitHub Secret Scanning)
#
# ==============================================================================
