{
  "title": "Host Details",
  "schemaVersion": 39,
  "version": 1,
  "refresh": "1m",
  "time": { "from": "now-6h", "to": "now" },
  "templating": {
    "list": [
      {
        "name": "instance",
        "type": "query",
        "datasource": "Prometheus",
        "query": "label_values(node_uname_info, instance)",
        "refresh": 2
      }
    ]
  },
  "panels": [
    {"type": "timeseries", "title": "CPU per Core", "id": 1, "gridPos": {"x":0,"y":0,"w":12,"h":6}, "datasource":"Prometheus", "targets":[{"expr":"rate(node_cpu_seconds_total{mode!='idle',instance='$instance'}[5m])*100"}], "fieldConfig":{"defaults":{"unit":"percent"}}},
    {"type": "timeseries", "title": "Memory Breakdown", "id": 2, "gridPos": {"x":12,"y":0,"w":12,"h":6}, "datasource":"Prometheus", "targets":[{"expr":"(node_memory_MemAvailable_bytes{instance='$instance'})"},{"expr":"node_memory_Cached_bytes{instance='$instance'}"},{"expr":"node_memory_Buffers_bytes{instance='$instance'}"}], "fieldConfig":{"defaults":{"unit":"bytes"}}},
    {"type": "timeseries", "title": "Disk IO", "id": 3, "gridPos": {"x":0,"y":6,"w":12,"h":6}, "datasource":"Prometheus", "targets":[{"expr":"rate(node_disk_reads_completed_total{instance='$instance'}[5m])"},{"expr":"rate(node_disk_writes_completed_total{instance='$instance'}[5m])"}]},
    {"type": "timeseries", "title": "Network Interfaces", "id": 4, "gridPos": {"x":12,"y":6,"w":12,"h":6}, "datasource":"Prometheus", "targets":[{"expr":"rate(node_network_receive_bytes_total{instance='$instance'}[5m])"},{"expr":"rate(node_network_transmit_bytes_total{instance='$instance'}[5m])"}], "fieldConfig":{"defaults":{"unit":"Bps"}}},
    {"type": "gauge", "title": "Filesystem Usage", "id": 5, "gridPos": {"x":0,"y":12,"w":6,"h":6}, "datasource":"Prometheus", "targets":[{"expr":"(node_filesystem_size_bytes{instance='$instance',fstype!~'tmpfs|overlay'} - node_filesystem_free_bytes{instance='$instance',fstype!~'tmpfs|overlay'}) / node_filesystem_size_bytes{instance='$instance',fstype!~'tmpfs|overlay'} * 100"}], "fieldConfig":{"defaults":{"unit":"percent","thresholds":{"mode":"percentage","steps":[{"color":"green","value":null},{"color":"yellow","value":70},{"color":"red","value":90}]}}}},
    {"type": "stat", "title": "Load 1/5/15", "id": 6, "gridPos": {"x":6,"y":12,"w":6,"h":6}, "datasource":"Prometheus", "targets":[{"expr":"node_load1{instance='$instance'}"},{"expr":"node_load5{instance='$instance'}"},{"expr":"node_load15{instance='$instance'}"}], "options":{"reduceOptions":{"calcs":["lastNotNull"]}}},
    {"type": "table", "title": "Top Processes", "id": 7, "gridPos": {"x":12,"y":12,"w":12,"h":6}, "datasource":"Prometheus", "targets":[{"expr":"topk(5, process_virtual_memory_bytes{instance='$instance'})"}], "transformations":[{"id":"organize","options":{"renameByName":{"Value":"Memory"}}}]}
  ]
}
