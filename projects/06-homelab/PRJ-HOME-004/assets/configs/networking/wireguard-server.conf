# WireGuard VPN Server Configuration
# Interface: wg0
# Network: 10.10.10.0/24
#
# Installation: Place in /etc/wireguard/wg0.conf
# Start: systemctl enable --now wg-quick@wg0

[Interface]
# Server private key (replace with actual key)
PrivateKey = SERVER_PRIVATE_KEY_PLACEHOLDER

# VPN subnet
Address = 10.10.10.1/24

# Listen port
ListenPort = 51820

# Post-up: Enable routing and NAT for VPN clients
PostUp = iptables -A FORWARD -i %i -j ACCEPT
PostUp = iptables -A FORWARD -o %i -j ACCEPT
PostUp = iptables -t nat -A POSTROUTING -o enp0s31f6 -j MASQUERADE

# Post-down: Cleanup rules on shutdown
PostDown = iptables -D FORWARD -i %i -j ACCEPT
PostDown = iptables -D FORWARD -o %i -j ACCEPT
PostDown = iptables -t nat -D POSTROUTING -o enp0s31f6 -j MASQUERADE

# DNS server for VPN clients (UniFi Gateway)
DNS = 192.168.10.1

# Keep alive to maintain connection through NAT
PersistentKeepalive = 25

# ============================================
# Peer: Admin Laptop
# ============================================
[Peer]
# Admin laptop public key
PublicKey = ADMIN_LAPTOP_PUBLIC_KEY_PLACEHOLDER

# Allowed IPs: VPN address of this peer
AllowedIPs = 10.10.10.10/32

# Description
# Owner: Samuel Jackson
# Device: Work laptop
# Purpose: Administrative access to homelab

# ============================================
# Peer: Admin Phone
# ============================================
[Peer]
# Admin phone public key
PublicKey = ADMIN_PHONE_PUBLIC_KEY_PLACEHOLDER

# Allowed IPs: VPN address of this peer
AllowedIPs = 10.10.10.11/32

# Description
# Owner: Samuel Jackson
# Device: Mobile phone
# Purpose: Emergency administrative access

# ============================================
# Peer: Family Admin
# ============================================
[Peer]
# Family admin public key
PublicKey = FAMILY_ADMIN_PUBLIC_KEY_PLACEHOLDER

# Allowed IPs: VPN address of this peer
AllowedIPs = 10.10.10.20/32

# Description
# Owner: Andrew Vongsady
# Device: Laptop
# Purpose: Secondary admin access for sponsor

# ============================================
# Security Notes
# ============================================
# 1. Generate keys with: wg genkey | tee privatekey | wg pubkey > publickey
# 2. Never commit actual private keys to version control
# 3. Rotate keys quarterly per security policy
# 4. Use strong pre-shared keys (PSK) for additional security if needed
# 5. Monitor connection logs for unauthorized access attempts
