{
  "_comment": "UniFi Site Configuration Template",
  "_description": "This is a sanitized template showing UniFi controller site configuration for a homelab network with VLANs, SSIDs, and firewall rules",
  "_warning": "All IP addresses, SSIDs, and credentials are examples. Replace with your actual values.",
  "_export_method": "Settings > Site > Export Site",

  "site": {
    "name": "homelab",
    "desc": "Homelab Network Infrastructure",
    "timezone": "America/Los_Angeles"
  },

  "networks": [
    {
      "name": "Management",
      "purpose": "corporate",
      "vlan": 1,
      "subnet": "192.168.1.0/24",
      "gateway": "192.168.1.1",
      "dhcp_enabled": true,
      "dhcp_start": "192.168.1.100",
      "dhcp_stop": "192.168.1.200",
      "dhcp_dns": ["192.168.1.1", "1.1.1.1"],
      "domain_name": "mgmt.homelab.local",
      "enabled": true
    },
    {
      "name": "Trusted",
      "purpose": "corporate",
      "vlan": 10,
      "subnet": "192.168.10.0/24",
      "gateway": "192.168.10.1",
      "dhcp_enabled": true,
      "dhcp_start": "192.168.10.100",
      "dhcp_stop": "192.168.10.200",
      "dhcp_dns": ["192.168.10.2", "192.168.1.1"],
      "domain_name": "homelab.local",
      "enabled": true,
      "igmp_snooping": true
    },
    {
      "name": "IoT",
      "purpose": "corporate",
      "vlan": 20,
      "subnet": "192.168.20.0/24",
      "gateway": "192.168.20.1",
      "dhcp_enabled": true,
      "dhcp_start": "192.168.20.100",
      "dhcp_stop": "192.168.20.250",
      "dhcp_dns": ["192.168.10.2"],
      "domain_name": "iot.homelab.local",
      "enabled": true,
      "isolation": true
    },
    {
      "name": "Guest",
      "purpose": "guest",
      "vlan": 30,
      "subnet": "192.168.30.0/24",
      "gateway": "192.168.30.1",
      "dhcp_enabled": true,
      "dhcp_start": "192.168.30.100",
      "dhcp_stop": "192.168.30.250",
      "dhcp_dns": ["1.1.1.1", "8.8.8.8"],
      "enabled": true,
      "guest_policy": "post_auth",
      "isolation": true
    },
    {
      "name": "Quarantine",
      "purpose": "corporate",
      "vlan": 99,
      "subnet": "192.168.99.0/24",
      "gateway": "192.168.99.1",
      "dhcp_enabled": true,
      "dhcp_start": "192.168.99.100",
      "dhcp_stop": "192.168.99.250",
      "dhcp_dns": ["192.168.10.2"],
      "enabled": true,
      "isolation": true
    }
  ],

  "wireless_networks": [
    {
      "name": "HomeNet-5G",
      "security": "wpapsk",
      "wpa_mode": "wpa2",
      "wpa_enc": "ccmp",
      "passphrase": "REDACTED_USE_STRONG_PASSWORD",
      "vlan": 10,
      "vlan_enabled": true,
      "band": "5g",
      "channel": "auto",
      "channel_width": 80,
      "minrate_na_enabled": true,
      "minrate_na": 12,
      "enabled": true,
      "hide_ssid": false,
      "pmf_mode": "optional",
      "wlan_band": "5g"
    },
    {
      "name": "HomeNet-2.4G",
      "security": "wpapsk",
      "wpa_mode": "wpa2",
      "wpa_enc": "ccmp",
      "passphrase": "REDACTED_USE_STRONG_PASSWORD",
      "vlan": 10,
      "vlan_enabled": true,
      "band": "2g",
      "channel": "auto",
      "channel_width": 20,
      "minrate_ng_enabled": true,
      "minrate_ng": 6,
      "enabled": true,
      "hide_ssid": false,
      "pmf_mode": "optional",
      "wlan_band": "2g"
    },
    {
      "name": "IoT-Network",
      "security": "wpapsk",
      "wpa_mode": "wpa2",
      "wpa_enc": "ccmp",
      "passphrase": "REDACTED_DIFFERENT_PASSWORD",
      "vlan": 20,
      "vlan_enabled": true,
      "band": "both",
      "channel": "auto",
      "enabled": true,
      "hide_ssid": false,
      "client_isolation": true,
      "pmf_mode": "disabled",
      "comment": "IoT devices only - isolated from main network"
    },
    {
      "name": "Guest-WiFi",
      "security": "wpapsk",
      "wpa_mode": "wpa2",
      "wpa_enc": "ccmp",
      "passphrase": "REDACTED_GUEST_PASSWORD",
      "vlan": 30,
      "vlan_enabled": true,
      "is_guest": true,
      "band": "both",
      "channel": "auto",
      "enabled": true,
      "hide_ssid": false,
      "client_isolation": true,
      "guest_portal_enabled": false,
      "comment": "Guest network - internet only"
    }
  ],

  "firewall_rules": [
    {
      "name": "Allow Management to All",
      "enabled": true,
      "action": "accept",
      "rule_index": 2000,
      "protocol": "all",
      "src_networkconf_type": "NETv4",
      "src_networkconf_id": "MANAGEMENT_NETWORK_ID",
      "dst_networkconf_type": "NETv4",
      "dst_networkconf_id": "any",
      "description": "Allow management VLAN full access"
    },
    {
      "name": "Block IoT to Trusted",
      "enabled": true,
      "action": "drop",
      "rule_index": 2001,
      "protocol": "all",
      "src_networkconf_type": "NETv4",
      "src_networkconf_id": "IOT_NETWORK_ID",
      "dst_networkconf_type": "NETv4",
      "dst_networkconf_id": "TRUSTED_NETWORK_ID",
      "logging": true,
      "description": "Block IoT devices from accessing trusted network"
    },
    {
      "name": "Allow IoT to Home Assistant",
      "enabled": true,
      "action": "accept",
      "rule_index": 2002,
      "protocol": "tcp",
      "src_networkconf_type": "NETv4",
      "src_networkconf_id": "IOT_NETWORK_ID",
      "dst_address": "192.168.10.101",
      "dst_port": "8123",
      "description": "Allow IoT devices to Home Assistant"
    },
    {
      "name": "Block Guest to Internal",
      "enabled": true,
      "action": "drop",
      "rule_index": 2003,
      "protocol": "all",
      "src_networkconf_type": "NETv4",
      "src_networkconf_id": "GUEST_NETWORK_ID",
      "dst_networkconf_type": "ADDRv4",
      "dst_address": "192.168.0.0/16",
      "logging": true,
      "description": "Block guest network from accessing internal networks"
    },
    {
      "name": "Allow DNS to Pi-hole",
      "enabled": true,
      "action": "accept",
      "rule_index": 2004,
      "protocol": "udp",
      "src_networkconf_type": "NETv4",
      "src_networkconf_id": "any",
      "dst_address": "192.168.10.2",
      "dst_port": "53",
      "description": "Allow all networks to use Pi-hole DNS"
    }
  ],

  "port_forward_rules": [
    {
      "_comment": "No port forwarding - using Cloudflare Tunnel instead",
      "_note": "All external access goes through reverse proxy"
    }
  ],

  "device_settings": {
    "switches": {
      "stp_enabled": true,
      "stp_priority": 32768,
      "jumbo_frames": false,
      "port_isolation": true,
      "flow_control_enabled": false
    },
    "access_points": {
      "min_rssi": -75,
      "optimize_wifi": true,
      "fast_roaming": true,
      "transmit_power_mode": "auto",
      "channel_width_2g": 20,
      "channel_width_5g": 80,
      "dfs_channels": true
    }
  },

  "global_settings": {
    "auto_upgrade": true,
    "analytics_enabled": false,
    "country": "US",
    "timezone": "America/Los_Angeles",
    "ntp_server_1": "192.168.10.105",
    "ntp_server_2": "pool.ntp.org",
    "syslog_enabled": true,
    "syslog_server": "192.168.10.103",
    "syslog_port": 514
  },

  "radius_profiles": [
    {
      "_comment": "802.1X authentication with FreeIPA RADIUS",
      "name": "Corporate-Auth",
      "auth_servers": [
        {
          "ip": "192.168.10.106",
          "port": 1812,
          "secret": "REDACTED_RADIUS_SECRET"
        }
      ],
      "acct_servers": [
        {
          "ip": "192.168.10.106",
          "port": 1813,
          "secret": "REDACTED_RADIUS_SECRET"
        }
      ],
      "enabled": false,
      "_note": "Enable for 802.1X port authentication when ready"
    }
  ],

  "dpi_settings": {
    "enabled": true,
    "categories": [
      {
        "name": "Streaming",
        "apps": ["Netflix", "YouTube", "Hulu", "Disney+"],
        "action": "allow",
        "qos_priority": "medium"
      },
      {
        "name": "Gaming",
        "apps": ["Steam", "Epic Games", "PlayStation Network", "Xbox Live"],
        "action": "allow",
        "qos_priority": "high"
      },
      {
        "name": "VoIP",
        "apps": ["Zoom", "Teams", "Skype", "Discord"],
        "action": "allow",
        "qos_priority": "high"
      }
    ]
  },

  "traffic_rules": {
    "smart_queues": true,
    "bandwidth_limits": {
      "guest_network": {
        "download": 50,
        "upload": 10,
        "unit": "Mbps"
      }
    }
  },

  "notes": [
    "This is a sanitized configuration template",
    "All passwords and secrets are marked as REDACTED",
    "IP addresses are examples from RFC 1918 private ranges",
    "Replace NETWORK_IDs with actual UniFi object IDs",
    "Test configuration in lab before deploying to production",
    "Export actual config from: Settings > Site > Export Site",
    "Import config to new controller: Settings > Site > Import Site",
    "Always backup configuration before making changes"
  ],

  "best_practices": [
    "Use separate VLANs for different security zones",
    "Enable client isolation on guest and IoT networks",
    "Use WPA2 or WPA3 for wireless security",
    "Enable firewall logging for security monitoring",
    "Regular firmware updates for security patches",
    "Use RADIUS for enterprise authentication when possible",
    "Monitor DPI stats for bandwidth hogs",
    "Test disaster recovery by restoring config to test controller"
  ]
}
