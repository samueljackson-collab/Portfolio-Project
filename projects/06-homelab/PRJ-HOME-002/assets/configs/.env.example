# ==============================================================================
# Environment Configuration for Home Assistant and Immich
# ==============================================================================
#
# INSTRUCTIONS:
# 1. Copy this file to .env in the same directory
# 2. Fill in all values (no placeholders should remain)
# 3. Never commit .env to version control (already in .gitignore)
# 4. Use strong passwords (20+ characters, mixed case, numbers, symbols)
#
# SECURITY NOTES:
# - Generate passwords with: openssl rand -base64 32
# - Store backup copy in password manager (1Password, Bitwarden, KeePass)
# - Rotate passwords annually or after suspected compromise
#
# ==============================================================================

# ------------------------------------------------------------------------------
# GLOBAL SETTINGS
# ------------------------------------------------------------------------------

# Timezone (used by all services for logs and automations)
# Find your timezone: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones
# Examples: America/New_York, Europe/London, Asia/Tokyo, Australia/Sydney
TZ=America/Los_Angeles

# Domain name for Traefik reverse proxy (optional)
# Used for automatic SSL certificate generation
# Leave as homelab.local if not using public domain
DOMAIN_NAME=homelab.local

# ------------------------------------------------------------------------------
# HOME ASSISTANT CONFIGURATION
# ------------------------------------------------------------------------------

# Zigbee USB Coordinator Device Path
# Detect with: ls -la /dev/serial/by-id/
# Common devices:
#   Sonoff Zigbee 3.0 USB Dongle Plus: /dev/serial/by-id/usb-ITead_Sonoff_Zigbee_3.0_USB_Dongle_Plus*
#   ConBee II: /dev/serial/by-id/usb-dresden_elektronik_ingenieurtechnik_GmbH_ConBee_II*
#   Elelabs: /dev/serial/by-id/usb-Elelabs_ELU013*
# Leave commented if not using Zigbee
# ZIGBEE_USB_DEVICE=/dev/serial/by-id/usb-ITead_Sonoff_Zigbee_3.0_USB_Dongle_Plus_V2_20230619-if00

# Bluetooth Adapter Device Path (optional)
# Leave commented if not using Bluetooth
# BLUETOOTH_DEVICE=/dev/bluetooth

# ------------------------------------------------------------------------------
# MOSQUITTO MQTT BROKER
# ------------------------------------------------------------------------------

# MQTT Username
# Used by Home Assistant and IoT devices to authenticate to broker
# Recommendation: Use dedicated service account name (e.g., "homeassistant")
MQTT_USERNAME=homeassistant

# MQTT Password
# Generate with: openssl rand -base64 32
# Must be set in both .env and Mosquitto password file
# See deployment guide for password file creation
MQTT_PASSWORD=CHANGE_ME_GENERATE_STRONG_PASSWORD

# ------------------------------------------------------------------------------
# IMMICH PHOTO MANAGEMENT
# ------------------------------------------------------------------------------

# PostgreSQL Database Configuration
# If using Docker Compose PostgreSQL:
#   IMMICH_DB_HOSTNAME=postgres
# If using external database (recommended for production):
#   IMMICH_DB_HOSTNAME=<ip-or-hostname>
IMMICH_DB_HOSTNAME=postgres
IMMICH_DB_PORT=5432
IMMICH_DB_NAME=immich
IMMICH_DB_USERNAME=immich
IMMICH_DB_PASSWORD=CHANGE_ME_GENERATE_STRONG_PASSWORD

# Redis Password
# Generate with: openssl rand -base64 32
# Used for job queue authentication
IMMICH_REDIS_PASSWORD=CHANGE_ME_GENERATE_STRONG_PASSWORD

# Typesense API Key
# Generate with: openssl rand -base64 32
# Used for search engine authentication
IMMICH_TYPESENSE_API_KEY=CHANGE_ME_GENERATE_STRONG_PASSWORD

# Public URL for Immich Server
# Used by mobile app and external access
# Examples:
#   Local network: http://192.168.1.100:2283
#   Public domain: https://photos.example.com
#   Tailscale: http://homelab.tailnet-name.ts.net:2283
IMMICH_PUBLIC_URL=http://localhost:2283

# Immich Log Level
# Options: verbose, debug, log, warn, error
# Use "log" for production, "debug" for troubleshooting
IMMICH_LOG_LEVEL=log

# Machine Learning Thread Count
# Adjust based on CPU cores (typically cores - 1)
# Higher values = faster processing but more CPU usage
# Examples: 2 for dual-core, 4 for quad-core, 8 for octa-core
IMMICH_ML_THREADS=4

# ==============================================================================
# DEPLOYMENT CHECKLIST
# ==============================================================================
#
# [ ] Replace all CHANGE_ME values with strong passwords
# [ ] Set correct timezone for your location
# [ ] Configure Zigbee USB device path (if using Zigbee)
# [ ] Set Immich database hostname (postgres or external IP)
# [ ] Update Immich public URL for mobile app access
# [ ] Verify .env is in .gitignore (should already be there)
# [ ] Backup .env to secure location (password manager)
# [ ] Test configuration: docker compose config
# [ ] Start services: docker compose up -d
# [ ] Verify health: docker compose ps
#
# ==============================================================================
# EXAMPLE PRODUCTION VALUES (for reference only)
# ==============================================================================
#
# # Global
# TZ=America/Los_Angeles
# DOMAIN_NAME=homelab.local
#
# # Home Assistant
# ZIGBEE_USB_DEVICE=/dev/serial/by-id/usb-ITead_Sonoff_Zigbee_3.0_USB_Dongle_Plus_V2_20230619-if00
#
# # MQTT
# MQTT_USERNAME=homeassistant
# MQTT_PASSWORD=xK9mP2vL8nQ4wR7tY3uZ1aS5dF6gH0jB
#
# # Immich
# IMMICH_DB_HOSTNAME=192.168.1.50
# IMMICH_DB_PORT=5432
# IMMICH_DB_NAME=immich
# IMMICH_DB_USERNAME=immich
# IMMICH_DB_PASSWORD=zA1bC2dE3fG4hI5jK6lM7nO8pQ9rS0tU
# IMMICH_REDIS_PASSWORD=vW1xY2zA3bC4dE5fG6hI7jK8lM9nO0pQ
# IMMICH_TYPESENSE_API_KEY=rS1tU2vW3xY4zA5bC6dE7fG8hI9jK0lM
# IMMICH_PUBLIC_URL=http://192.168.1.100:2283
# IMMICH_LOG_LEVEL=log
# IMMICH_ML_THREADS=4
#
# ==============================================================================
