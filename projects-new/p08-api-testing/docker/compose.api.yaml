version: '3.9'
services:
  mock:
    image: node:20-alpine
    working_dir: /app
    volumes:
      - ../:/app
    command: ["node", "producer/mock.js"]
    ports:
      - "8080:8080"
  tests:
    image: postman/newman
    volumes:
      - ../:/etc/newman
    command: ["run", "producer/collections/core.postman_collection.json", "-e", "producer/env/local.postman_environment.json"]
    depends_on:
      - mock
